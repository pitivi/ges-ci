FROM debian:wheezy
# That list will need updating...
RUN apt-get -y update && apt-get dist-upgrade -y && apt-get install -y git python sudo aspell aspell-en at autoconf automake autopoint autotools-dev binutils bison bsdmainutils build-essential bzip2 chrpath cmake cmake-data cpp cpp-4.7 cron curl dbus dbus-x11 dconf-gsettings-backend dconf-service dctrl-tools debhelper debian-keyring devscripts dictionaries-common diffstat distro-info-data docbook docbook-dsssl docbook-to-man docbook-xml docbook-xsl doxygen doxygen-latex dpkg-dev dput ed emacsen-common enchant equivs exim4-base exim4-config exim4-daemon-light fakeroot flex fontconfig fontconfig-config fonts-droid freepats g++ g++-4.7 gawk gcc gcc-4.7 gconf-service gconf2 gconf2-common gettext gettext-base ghostscript gir1.2-gdkpixbuf-2.0 gir1.2-glib-2.0 glib-networking glib-networking-common glib-networking-services gnome-common gperf groff-base gsettings-desktop-schemas gsfonts gstreamer0.10-ffmpeg gstreamer0.10-gconf gstreamer0.10-plugins-bad gstreamer0.10-plugins-base gstreamer0.10-plugins-good gstreamer0.10-x gtk-doc-tools hardening-includes heirloom-mailx hicolor-icon-theme highlight highlight-common html2text hunspell-en-us intltool intltool-debian iso-codes jade latex-beamer latex-xcolor libaa1 libalgorithm-diff-perl libalgorithm-diff-xs-perl libalgorithm-merge-perl libapr1 libaprutil1 libapt-inst1.5 libapt-pkg-perl libarchive-zip-perl libarchive12 libasound2 libasound2-dev libaspell15 libasprintf0c2 libass4 libasyncns0 libatk1.0-0 libatk1.0-data libavahi-client-dev libavahi-client3 libavahi-common-data libavahi-common-dev libavahi-common3 libavc1394-0 libavcodec53 libavformat53 libavutil51 libbison-dev libc-dev-bin libc6-dev libcaca0 libcairo-gobject2 libcairo2 libcap2 libcdaudio1 libcdparanoia0 libclass-accessor-perl libclass-inspector-perl libclone-perl libcommon-sense-perl libconvert-binhex-perl libcroco3 libcrypt-ssleay-perl libcups2 libcupsimage2 libcurl3 libdatrie1 libdbus-1-3 libdbus-1-dev libdbus-glib-1-2 libdbus-glib-1-dev libdc1394-22 libdca0 libdconf0 libdigest-hmac-perl libdirac-encoder0 libdirectfb-1.2-9 libdistro-info-perl libdpkg-perl libdrm-dev libdrm-intel1 libdrm-nouveau1a libdrm-radeon1 libdrm2 libdv4 libdvdnav4 libdvdread4 libegl1-mesa libegl1-mesa-dev libegl1-mesa-drivers libelf1 libemail-valid-perl libenca0 libenchant1c2a libencode-locale-perl libexpat1-dev libexporter-lite-perl libfaad2 libfcgi-perl libffi5 libfftw3-3 libfile-basedir-perl libfile-desktopentry-perl libfile-fcntllock-perl libfile-listing-perl libfile-mimeinfo-perl libflac8 libflite1 libfont-afm-perl libfontconfig1 libfontenc1 libfreetype6 libfribidi0 libfuse-dev libfuse2 libgail18 libgbm1 libgconf-2-4 libgdk-pixbuf2.0-0 libgdk-pixbuf2.0-common libgdk-pixbuf2.0-dev libgeoclue0 libgettextpo0 libgirepository-1.0-1 libgl1-mesa-dev libgl1-mesa-dri libgl1-mesa-glx libglapi-mesa libglib2.0-0 libglib2.0-bin libglib2.0-data libglib2.0-dev libglu1-mesa libglu1-mesa-dev libgme0 libgmp10 libgnome-keyring-common libgnome-keyring0 libgomp1 libgraphite3 libgs9 libgs9-common libgsm1 libgstreamer-plugins-bad0.10-0 libgstreamer-plugins-base0.10-0 libgstreamer0.10-0 libgtk2.0-0 libgtk2.0-bin libgtk2.0-common libgudev-1.0-0 libhtml-form-perl libhtml-format-perl libhtml-parser-perl libhtml-tagset-perl libhtml-template-perl libhtml-tree-perl libhttp-cookies-perl libhttp-daemon-perl libhttp-date-perl libhttp-message-perl libhttp-negotiate-perl libhunspell-1.3-0 libice6 libicu48 libiec61883-0 libijs-0.35 libio-pty-perl libio-socket-ip-perl libio-socket-ssl-perl libio-string-perl libio-stringy-perl libipc-run-perl libitm1 libjack-jackd2-0 libjasper1 libjavascriptcoregtk-1.0-0 libjbig0 libjbig2dec0 libjpeg8 libjson-perl libjson-xs-perl libjson0 libkate1 libkms1 libkpathsea6 liblcms1 liblcms2-2 libltdl-dev libltdl7 liblua5.1-0 liblwp-mediatypes-perl liblwp-protocol-https-perl libmail-sendmail-perl libmailtools-perl libmhash2 libmime-tools-perl libmimic0 libmms0 libmodplug1 libmp3lame0 libmpc2 libmpcdec6 libmpfr4 libneon27-gnutls libnet-dbus-perl libnet-dns-perl libnet-domain-tld-perl libnet-http-perl libnet-ip-perl libnet-ssleay-perl libnetpbm10 libnettle4 libofa0 libogg0 libopenal-data libopenal1 libopenjpeg2 libopenvg1-mesa libopus0 liborc-0.4-0 libossp-uuid-perl libossp-uuid16 libpango1.0-0 libpaper-utils libpaper1 libparse-debcontrol-perl libparse-debianchangelog-perl libpciaccess0 libpcre3 libpcre3-dev libpcrecpp0 libpipeline1 libpixman-1-0 libpng12-0 libpng12-dev libpoppler19 libpostproc52 libprocps0 libproxy0 libptexenc1 libpthread-stubs0 libpthread-stubs0-dev libpulse-dev libpulse-mainloop-glib0 libpulse0 libpython2.7 libquadmath0 libraptor2-0 librasqal3 libraw1394-11 librdf0 librsvg2-2 librsvg2-common libruby1.9.1 libsamplerate0 libschroedinger-1.0-0 libselinux1-dev libsepol1-dev libshout3 libsigsegv2 libslv2-9 libsm6 libsndfile1 libsoap-lite-perl libsocket-perl libsoundtouch0 libsoup-gnome2.4-1 libsoup2.4-1 libsp1c2 libspandsp2 libspeex1 libssl-dev libssl-doc libstdc++6-4.7-dev libsub-name-perl libsvn1 libswscale2 libsys-hostname-long-perl libsystemd-login0 libtag1-vanilla libtag1c2a libtask-weaken-perl libthai-data libthai0 libtheora0 libtie-ixhash-perl libtiff4 libtimedate-perl libtool libts-0.0-0 libudev0 libunistring0 liburi-perl libusb-1.0-0 libutempter0 libv4l-0 libv4lconvert0 libva1 libvisual-0.4-0 libvisual-0.4-plugins libvo-aacenc0 libvo-amrwbenc0 libvorbis0a libvorbisenc2 libvpx1 libwavpack1 libwayland0 libwebkitgtk-1.0-0 libwebkitgtk-1.0-common libwildmidi-config libwildmidi1 libwrap0 libwww-perl libwww-robotrules-perl libx11-dev libx11-doc libx11-protocol-perl libx11-xcb-dev libx11-xcb1 libx264-123 libxau-dev libxaw7 libxcb-dri2-0 libxcb-glx0 libxcb-glx0-dev libxcb-render0 libxcb-shape0 libxcb-shm0 libxcb-xfixes0 libxcb1-dev libxcomposite-dev libxcomposite1 libxcursor1 libxdamage-dev libxdamage1 libxdmcp-dev libxext-dev libxfixes-dev libxfixes3 libxfont1 libxft2 libxi-dev libxi6 libxinerama1 libxml-namespacesupport-perl libxml-parser-perl libxml-sax-base-perl libxml-sax-expat-perl libxml-sax-perl libxml-simple-perl libxml-twig-perl libxml-xpathengine-perl libxml2 libxmlrpc-core-c3 libxmu6 libxpm4 libxrandr-dev libxrandr2 libxrender-dev libxrender1 libxslt1.1 libxt6 libxtst-dev libxtst6 libxv-dev libxv1 libxvidcore4 libxxf86dga1 libxxf86vm-dev libxxf86vm1 libyajl2 libyaml-0-2 libzbar0 libzvbi-common libzvbi0 lintian linux-libc-dev lmodern lsb-release luatex m4 make man-db manpages manpages-dev mesa-common-dev netpbm patchutils pgf pkg-config po-debconf poppler-data preview-latex-style procps prosper ps2eps psmisc python-apt python-apt-common python-chardet python-debian python-dev python-magic python2.7-dev ruby ruby1.9.1 sgml-base sgml-data shared-mime-info sp strace subversion tcl8.4 tcpd tex-common tex-gyre texinfo texlive-base texlive-binaries texlive-common texlive-doc-base texlive-extra-utils texlive-font-utils texlive-fonts-recommended texlive-fonts-recommended-doc texlive-generic-recommended texlive-latex-base texlive-latex-base-doc texlive-latex-extra texlive-latex-extra-doc texlive-latex-recommended texlive-latex-recommended-doc texlive-luatex texlive-pictures texlive-pictures-doc texlive-pstricks texlive-pstricks-doc tipa tk8.4 transfig tsconf ttf-dejavu-core ttf-marvosym ucf unzip wdiff wget x11-common x11-utils x11-xserver-utils x11proto-composite-dev x11proto-core-dev x11proto-damage-dev x11proto-dri2-dev x11proto-fixes-dev x11proto-gl-dev x11proto-input-dev x11proto-kb-dev x11proto-randr-dev x11proto-record-dev x11proto-render-dev x11proto-video-dev x11proto-xext-dev x11proto-xf86vidmode-dev xbitmaps xdg-utils xfonts-encodings xfonts-utils xml-core xorg-sgml-doctools xsltproc xterm xtrans-dev xutils-dev yasm zlib1g-dev ccache
RUN mkdir /root/devel
RUN cd /root/devel && git clone git://anongit.freedesktop.org/gstreamer/cerbero
RUN ln -s /root/devel/cerbero/cerbero-uninstalled /usr/bin/cerbero
RUN cd /root/devel/ && git clone https://github.com/pitivi/ges-ci.git
RUN cd /root/devel/ges-ci && git pull --rebase
RUN mkdir ~/.cerbero/ && echo "use_ccache=True\nvariants = ['python3', 'gtk3']" > ~/.cerbero/cerbero.cbc
RUN echo "#!/bin/sh\n\ncd /root/devel/ges-ci/ && git fetch && git reset --hard origin/master && /root/devel/ges-ci/update_bundle" > /usr/bin/update_bundle
RUN chmod +x /usr/bin/update_bundle
CMD update_bundle
